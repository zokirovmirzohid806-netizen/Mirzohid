<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akademik Yozuv - Test Dasturi</title>
    <style>
        /* ASOSIY STYLES - O'zgarishsiz qoldirildi */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; position: relative; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; position: relative; }
        .header h1 { font-size: 28px; margin-bottom: 10px; }
        .developer { font-size: 14px; opacity: 0.9; }

        /* ADMIN TUGMASI */
        .admin-btn { position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.2); border: 1px solid white; color: white; padding: 5px 15px; border-radius: 15px; cursor: pointer; font-size: 12px; }
        .admin-btn:hover { background: rgba(255,255,255,0.4); }

        /* UPLOAD SECTION - ADMIN UCHUN */
        .upload-section { padding: 40px; text-align: center; display: none; }
        .upload-area { border: 3px dashed #667eea; border-radius: 15px; padding: 40px; margin: 20px 0; cursor: pointer; transition: all 0.3s; background: #f8f9fa; }
        .upload-area:hover { background: #e8f0fe; border-color: #764ba2; }
        .upload-area.dragover { background: #e8f0fe; border-color: #764ba2; transform: scale(1.02); }
        .upload-icon { font-size: 48px; margin-bottom: 10px; }
        .upload-text { font-size: 16px; color: #333; margin-bottom: 5px; }
        #fileInput { display: none; }

        /* LOGIN PANEL */
        .login-panel { display: none; padding: 40px; text-align: center; }
        .input-group { margin-bottom: 20px; }
        .custom-input { padding: 12px 20px; border: 2px solid #e0e0e0; border-radius: 10px; width: 80%; max-width: 300px; font-size: 16px; outline: none; transition: 0.3s; }
        .custom-input:focus { border-color: #667eea; }

        /* MENYU VA OYNALAR */
        .main-menu { padding: 40px; display: block; }
        .menu-title { text-align: center; color: #333; margin-bottom: 30px; font-size: 24px; }
        .category-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .category-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 30px 20px; border-radius: 15px; cursor: pointer; font-size: 18px; font-weight: bold; transition: transform 0.3s, box-shadow 0.3s; position: relative; }
        .category-btn:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4); }

        .delete-btn { position: absolute; top: 10px; right: 10px; background: red; color: white; border: none; width: 25px; height: 25px; border-radius: 50%; cursor: pointer; font-size: 14px; display: none; z-index: 10; }
        .category-btn:hover .delete-btn.admin-mode { display: block; }

        /* QUIZ CONTAINER */
        .quiz-container { padding: 40px; display: none; }
        .progress-bar { background: #e0e0e0; height: 10px; border-radius: 10px; margin-bottom: 30px; overflow: hidden; }
        .progress-fill { background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); height: 100%; width: 0%; transition: width 0.3s; }
        .question-card { background: #f8f9fa; padding: 30px; border-radius: 15px; margin-bottom: 30px; }
        .question-number { color: #667eea; font-weight: bold; margin-bottom: 15px; font-size: 16px; }
        .question-text { font-size: 18px; color: #333; margin-bottom: 25px; line-height: 1.8; white-space: pre-wrap; font-family: 'Courier New', monospace; }
        .options { display: flex; flex-direction: column; gap: 15px; }
        .option { background: white; padding: 20px; border-radius: 10px; cursor: pointer; border: 2px solid #e0e0e0; transition: all 0.3s; font-size: 16px; white-space: pre-wrap; font-family: 'Courier New', monospace; }
        .option:hover { border-color: #667eea; transform: translateX(5px); }
        .option.selected { border-color: #667eea; background: #f0f4ff; }
        .option.correct { border-color: #4caf50; background: #e8f5e9; }
        .option.wrong { border-color: #f44336; background: #ffebee; }

        /* TUGMALAR */
        .btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 40px; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; transition: transform 0.3s; margin: 10px; }
        .btn:hover { transform: scale(1.05); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-secondary { background: #6c757d; }
        .btn-danger { background: #dc3545; background-image: none; }

        .controls { display: flex; justify-content: center; flex-wrap: wrap; margin-top: 20px; }
        .results { display: none; padding: 40px; text-align: center; }
        .score-display { font-size: 48px; color: #667eea; font-weight: bold; margin: 30px 0; }
        .result-details { background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; max-height: 500px; overflow-y: auto; }
        .result-row { display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #e0e0e0; font-size: 18px; }
        .footer { background: #f8f9fa; padding: 20px; text-align: center; color: #666; }
        .footer a { color: #667eea; text-decoration: none; font-weight: bold; }
        .feedback { display: none; margin-top: 10px; padding: 10px; border-radius: 5px; font-weight: bold; }
        .feedback.correct { background: #e8f5e9; color: #2e7d32; }
        .feedback.wrong { background: #ffebee; color: #c62828; }
        .file-info { background: #e8f5e9; padding: 15px; border-radius: 10px; margin: 20px 0; color: #2e7d32; }
        .error-message { background: #ffebee; padding: 15px; border-radius: 10px; margin: 20px 0; color: #c62828; }

        .empty-state { text-align: center; color: #888; padding: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="admin-btn" onclick="toggleAdminLogin()">Admin Panel</button>
            <h1>üéì Mirzohid test Dasturi</h1>
            <div class="developer">Dastur yaratuvchisi: Zokirov Mirzohid</div>
        </div>

        <div id="loginPanel" class="login-panel">
            <h2 class="menu-title">Admin Tizimiga Kirish</h2>
            <div class="input-group">
                <input type="password" id="adminPassword" class="custom-input" placeholder="Parolni kiriting">
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="hideLogin()">Bekor qilish</button>
                <button class="btn" onclick="checkAdmin()">Kirish</button>
            </div>
            <div id="loginError" style="color: red; margin-top: 10px;"></div>
        </div>

        <div id="adminDashboard" class="upload-section">
            <h2 class="menu-title">Yangi Test Qo'shish</h2>

            <div class="input-group">
                <input type="text" id="categoryName" class="custom-input" placeholder="Bo'lim nomini kiriting (masalan: Tarix 1-kitob)">
            </div>

            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üìÅ</div>
                <div class="upload-text">Faylni yuklash (.docx yoki .txt)</div>
                <div class="upload-hint">Avval bo'lim nomini yozing</div>
            </div>
            <input type="file" id="fileInput" accept=".docx,.txt">
            <div id="fileInfo"></div>

            <div class="controls">
                <button class="btn btn-secondary" onclick="logoutAdmin()">Chiqish</button>
            </div>
            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
            <h3>Mavjud Bo'limlar (O'chirish uchun ustiga bosing)</h3>
            <div class="category-grid" id="adminCategoryList" style="margin-top: 20px;"></div>
        </div>

        <div id="mainMenu" class="main-menu">
            <h2 class="menu-title">Bo'limni tanlang</h2>
            <div class="category-grid" id="categoryGrid">
                </div>
            <div id="emptyState" class="empty-state" style="display: none;">
                <h3>Hozircha testlar mavjud emas.</h3>
                <p>Admin tomonidan test yuklanishini kuting.</p>
            </div>
        </div>

        <div id="subCategoryMenu" class="main-menu" style="display: none;">
            <h2 class="menu-title" id="subCategoryTitle">Qismni tanlang</h2>
            <div class="category-grid" id="subCategoryGrid"></div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="showMainMenu()">Orqaga</button>
            </div>
        </div>

        <div id="quizContainer" class="quiz-container">
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
            <div id="questionCard" class="question-card"></div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="showSubMenuFromQuiz()">Bo'limga qaytish</button>
                <button id="nextBtn" class="btn" onclick="nextQuestion()">Keyingi savol</button>
            </div>
        </div>

        <div id="results" class="results">
            <h2>üéâ Test Yakunlandi!</h2>
            <div class="score-display" id="scoreDisplay"></div>
            <div class="result-details" id="resultDetails"></div>
            <div class="controls">
                <button class="btn" onclick="showSubMenuFromQuiz()">Qismlar menyusi</button>
                <button class="btn" onclick="showAnalysis()">Test tahlili</button>
            </div>
        </div>

        <div class="footer">
            Murojaat uchun: <a href="https://t.me/zokirov_0712" target="_blank">@zokirov_0712</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>

    <script>
        // GLOBAL O'ZGARUVCHILAR
        let storedCategories = [];
        let currentQuizQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let answered = false;
        let userAnswers = [];
        let isAdmin = false;
        let currentCategoryIndexGlobal = -1; 

        // Dastur ishga tushganda ma'lumotlarni yuklash
        document.addEventListener('DOMContentLoaded', () => {
            loadCategoriesFromStorage();
            renderUserCategories();
        });

        // --- LOCAL STORAGE BILAN ISHLASH ---
        function loadCategoriesFromStorage() {
            const data = localStorage.getItem('zokirov_quiz_data');
            if (data) {
                storedCategories = JSON.parse(data);
            } else {
                storedCategories = [];
            }
        }

        function saveCategoriesToStorage() {
            localStorage.setItem('zokirov_quiz_data', JSON.stringify(storedCategories));
            renderUserCategories();
            if(isAdmin) renderAdminCategories();
        }

        // --- ADMIN PANEL LOGIKASI ---
        function toggleAdminLogin() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('subCategoryMenu').style.display = 'none';
            document.getElementById('loginPanel').style.display = 'block';
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('results').style.display = 'none';
        }

        function hideLogin() {
            document.getElementById('loginPanel').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'block';
            document.getElementById('adminPassword').value = '';
            document.getElementById('loginError').textContent = '';
        }

        function checkAdmin() {
            const pass = document.getElementById('adminPassword').value;
            if (pass === 'zokirov0712') {
                isAdmin = true;
                document.getElementById('loginPanel').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                renderAdminCategories();
            } else {
                document.getElementById('loginError').textContent = 'Parol noto\'g\'ri!';
            }
        }

        function logoutAdmin() {
            isAdmin = false;
            document.getElementById('adminPassword').value = '';
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'block';
            renderUserCategories();
        }

        function deleteCategory(index) {
            if(confirm("Rostdan ham ushbu bo'limni o'chirmoqchimisiz?")) {
                storedCategories.splice(index, 1);
                saveCategoriesToStorage();
            }
        }

        // --- FAYL YUKLASH LOGIKASI ---
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');

        uploadArea.addEventListener('click', () => {
            const catName = document.getElementById('categoryName').value;
            if(!catName.trim()) { alert("Iltimos, avval bo'lim nomini kiriting!"); return; }
            fileInput.click();
        });

        uploadArea.addEventListener('dragover', (e) => { e.preventDefault(); uploadArea.classList.add('dragover'); });
        uploadArea.addEventListener('dragleave', () => { uploadArea.classList.remove('dragover'); });
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const catName = document.getElementById('categoryName').value;
            if(!catName.trim()) { alert("Iltimos, avval bo'lim nomini kiriting!"); return; }
            handleFile(e.dataTransfer.files[0]);
        });

        fileInput.addEventListener('change', (e) => {
            const catName = document.getElementById('categoryName').value;
            if(!catName.trim()) { alert("Iltimos, avval bo'lim nomini kiriting!"); return; }
            handleFile(e.target.files[0]);
        });

        function handleFile(file) {
            if (!file) return;
            const fileName = file.name.toLowerCase();

            if (fileName.endsWith('.txt')) {
                const reader = new FileReader();
                reader.onload = (e) => processQuestions(e.target.result);
                reader.readAsText(file);
            } else if (fileName.endsWith('.docx')) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    mammoth.extractRawText({arrayBuffer: e.target.result})
                        .then(result => processQuestions(result.value))
                        .catch(err => showError('DOCX xatolik: ' + err.message));
                };
                reader.readAsArrayBuffer(file);
            } else {
                showError('Faqat .txt yoki .docx fayl yuklang!');
            }
        }

        function processQuestions(text) {
            try {
                const parsed = parseQuestionsLogic(text);
                if (parsed.length === 0) {
                    showError("Faylda savollar topilmadi yoki format noto'g'ri.");
                    return;
                }

                const catName = document.getElementById('categoryName').value.trim();

                storedCategories.push({
                    name: catName,
                    questions: parsed,
                    date: new Date().toLocaleDateString()
                });

                saveCategoriesToStorage();
                showSuccess(`‚úì "${catName}" bo'limi muvaffaqiyatli qo'shildi! (${parsed.length} ta savol)`);

                document.getElementById('categoryName').value = '';
                document.getElementById('fileInput').value = '';

            } catch (e) {
                showError("Xatolik: " + e.message);
            }
        }

        function parseQuestionsLogic(text) {
            const lines = text.split('\n').map(l => l.trim());
            let rawQuestions = [];
            let currentQ = null;

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                if (!line) continue;
                
                // Savol raqami bilan boshlanadimi tekshirish (masalan: "1.", "1)", "133.")
                const questionMatch = line.match(/^(\d+)[\.\)]\s*(.+)$/);
                
                if (questionMatch) {
                    // Agar oldingi savol bor bo'lsa, uni saqlash
                    if (currentQ && currentQ.parsedOptions.length > 0) {
                        rawQuestions.push(currentQ);
                    }
                    // Yangi savolni boshlash
                    currentQ = { 
                        questionText: questionMatch[2].trim(), 
                        parsedOptions: [] 
                    };
                } else {
                    // Javob variantlarini tekshirish
                    const cleanLine = line.replace(/^[*#\[\]\s]+/, '');
                    const optionMatch = cleanLine.match(/^([A-Da-d])[\.\)]\s*(.+)$/);
                    
                    if (optionMatch && currentQ) {
                        // To'g'ri javob belgilari: #, *, [+], yoki satr boshida +
                        const isMarkedCorrect = line.includes('#') || line.includes('*') || line.includes('[+') || line.startsWith('+');
                        currentQ.parsedOptions.push({
                            text: optionMatch[2].trim(),
                            isCorrect: isMarkedCorrect
                        });
                    } else if (currentQ) {
                        // Agar bu savol yoki javob emas, lekin currentQ mavjud bo'lsa
                        // Davomini qo'shish (ko'p qatorli matn)
                        if (currentQ.parsedOptions.length === 0) {
                            currentQ.questionText += "\n" + line;
                        } else {
                            // Oxirgi javob variantiga qo'shish
                            currentQ.parsedOptions[currentQ.parsedOptions.length - 1].text += "\n" + line;
                        }
                    }
                }
            }
            
            // Oxirgi savolni qo'shish
            if (currentQ && currentQ.parsedOptions.length > 0) {
                rawQuestions.push(currentQ);
            }

            // Savollarni qayta ishlash
            return rawQuestions.map(q => {
                let correctIndex = q.parsedOptions.findIndex(o => o.isCorrect);
                if (correctIndex === -1 && q.parsedOptions.length > 0) correctIndex = 0;

                if (q.parsedOptions.length >= 2) {
                    return {
                        q: q.questionText,
                        o: q.parsedOptions.map(opt => opt.text),
                        c: correctIndex
                    };
                }
                return null;
            }).filter(q => q !== null);
        }

        // --- RENDER QILISH ---
        function renderUserCategories() {
            const grid = document.getElementById('categoryGrid');
            const empty = document.getElementById('emptyState');
            grid.innerHTML = '';

            if (storedCategories.length === 0) {
                empty.style.display = 'block';
                return;
            }
            empty.style.display = 'none';

            const icons = ['üìö', 'üìù', '‚úçÔ∏è', 'üìñ', 'üìï', 'üìó', 'üìò', 'üìô'];
            storedCategories.forEach((cat, index) => {
                const btn = document.createElement('button');
                btn.className = 'category-btn';
                btn.innerHTML = `
                    ${icons[index % icons.length]} ${cat.name}<br>
                    <small>${cat.questions.length} ta savol</small>
                `;
                btn.onclick = () => openSubCategoryMenu(index);
                grid.appendChild(btn);
            });
        }

        function renderAdminCategories() {
            const grid = document.getElementById('adminCategoryList');
            grid.innerHTML = '';

            if (storedCategories.length === 0) {
                grid.innerHTML = '<p>Hozircha bo\'limlar yo\'q</p>';
                return;
            }

            storedCategories.forEach((cat, index) => {
                const btn = document.createElement('div');
                btn.className = 'category-btn';
                btn.style.cursor = 'default';
                btn.innerHTML = `
                    üóëÔ∏è ${cat.name}<br>
                    <small>${cat.questions.length} ta savol</small>
                    <button class="delete-btn admin-mode" onclick="deleteCategory(${index})">X</button>
                `;
                grid.appendChild(btn);
            });
        }

        // --- QISMLARGA BO'LISH ---
        function openSubCategoryMenu(index) {
            currentCategoryIndexGlobal = index;
            const category = storedCategories[index];
            const totalQuestions = category.questions.length;

            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('subCategoryMenu').style.display = 'block';
            document.getElementById('subCategoryTitle').textContent = `"${category.name}" - Qismni tanlang`;

            const grid = document.getElementById('subCategoryGrid');
            grid.innerHTML = '';

            let partNumber = 1;
            for (let i = 0; i < totalQuestions; i += 50) {
                const end = Math.min(i + 50, totalQuestions);
                const btn = document.createElement('button');
                btn.className = 'category-btn';
                btn.innerHTML = `
                    üìù ${partNumber}-Qism<br>
                    <small>Savollar: ${i + 1} - ${end}</small>
                `;
                btn.onclick = () => startQuizChunk(index, i, end);
                grid.appendChild(btn);
                partNumber++;
            }
        }

        // --- TEST ISHLASH LOGIKASI ---
        function startQuizChunk(catIndex, startIndex, endIndex) {
            const allQuestions = storedCategories[catIndex].questions;
            currentQuizQuestions = allQuestions.slice(startIndex, endIndex);

            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];

            document.getElementById('subCategoryMenu').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            const question = currentQuizQuestions[currentQuestionIndex];
            const optionsWithData = question.o.map((opt, idx) => ({
                text: opt,
                isCorrect: idx === question.c
            }));

            for (let i = optionsWithData.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [optionsWithData[i], optionsWithData[j]] = [optionsWithData[j], optionsWithData[i]];
            }

            const card = document.getElementById('questionCard');
            card.innerHTML = `
                <div class="question-number">Savol ${currentQuestionIndex + 1} / ${currentQuizQuestions.length}</div>
                <div class="question-text">${question.q}</div>
                <div class="options">
                    ${optionsWithData.map((opt, idx) => `
                        <div class="option" onclick="selectOption(${idx}, ${opt.isCorrect})" id="option${idx}">
                            ${opt.text}
                        </div>
                    `).join('')}
                </div>
                <div class="feedback" id="feedback"></div>
            `;
            answered = false;
            updateProgress();
        }

        function selectOption(idx, isCorrect) {
            if (answered) return;
            answered = true;
            const el = document.getElementById('option' + idx);
            const feedback = document.getElementById('feedback');

            el.classList.add('selected');
            if (isCorrect) {
                score++;
                el.classList.add('correct');
                feedback.className = 'feedback correct';
                feedback.textContent = '‚úì To\'g\'ri javob!';
            } else {
                el.classList.add('wrong');
                feedback.className = 'feedback wrong';
                feedback.textContent = '‚úó Noto\'g\'ri javob!';

                document.querySelectorAll('.option').forEach(opt => {
                     if(opt.getAttribute('onclick').includes('true')) opt.classList.add('correct');
                });
            }
            feedback.style.display = 'block';
            userAnswers.push({ q: currentQuizQuestions[currentQuestionIndex].q, correct: isCorrect });
        }

        function nextQuestion() {
            if (!answered) { alert('Javobni tanlang!'); return; }
            currentQuestionIndex++;
            if (currentQuestionIndex >= currentQuizQuestions.length) showResults();
            else showQuestion();
        }

        function updateProgress() {
            const pct = ((currentQuestionIndex + 1) / currentQuizQuestions.length) * 100;
            const fill = document.getElementById('progressFill');
            if(fill) fill.style.width = pct + '%';
        }

        function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('results').style.display = 'block';

            const total = currentQuizQuestions.length;
            const pct = (score / total * 100).toFixed(1);

            document.getElementById('scoreDisplay').textContent = `${score} / ${total}`;
            document.getElementById('resultDetails').innerHTML = `
                <div class="result-row"><span>Foiz:</span> <b>${pct}%</b></div>
                <div style="margin-top:20px; font-size: 20px;">${pct >= 70 ? 'üéâ Ajoyib!' : 'üìö Yaxshiroq harakat qiling!'}</div>
            `;
        }

        function showAnalysis() {
            let html = '<h3>Tahlil</h3>';
            userAnswers.forEach((ans, i) => {
                html += `<div style="padding:10px; margin:5px 0; background:${ans.correct?'#e8f5e9':'#ffebee'}">
                    <b>${i+1}.</b> ${ans.q} - ${ans.correct ? 'To\'g\'ri' : 'Xato'}
                </div>`;
            });
            document.getElementById('resultDetails').innerHTML = html;
        }

        function showMainMenu() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('results').style.display = 'none';
            document.getElementById('subCategoryMenu').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'block';
        }

        function showSubMenuFromQuiz() {
            if(currentCategoryIndexGlobal !== -1) {
                document.getElementById('quizContainer').style.display = 'none';
                document.getElementById('results').style.display = 'none';
                openSubCategoryMenu(currentCategoryIndexGlobal);
            } else {
                showMainMenu();
            }
        }

        function showSuccess(msg) { fileInfo.innerHTML = `<div class="file-info">${msg}</div>`; }
        function showError(msg) { fileInfo.innerHTML = `<div class="error-message">${msg}</div>`; }
    </script>
</body>
</html>
